<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>TagBase</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- Graffiti Font -->
  <link href="https://fonts.googleapis.com/css2?family=Permanent+Marker&display=swap" rel="stylesheet">
  
  <style>
    /* Geneli */
    body {
      margin: 0;
      font-family: 'Arial', sans-serif;
      background: url('https://i.ibb.co/XtK9X6q/spray-bg.jpg') no-repeat center center fixed;
      background-size: cover;
      color: #fff;
      text-align: center;
    }

    /* Header */
    header {
      padding: 60px 20px;
      background: rgba(0,0,0,0.7);
    }
    header h1 {
      font-family: 'Permanent Marker', cursive;
      font-size: 60px;
      margin-bottom: 10px;
    }
    header p {
      color: #ccc;
      font-size: 18px;
    }

    /* Boxes */
    section {
      padding: 40px 20px;
    }
    .box {
      max-width: 600px;
      margin: auto;
      background: rgba(22,22,22,0.9);
      padding: 25px;
      border-radius: 10px;
      margin-bottom: 20px;
    }

    /* Admin */
    .admin-panel {
      margin-top: 40px;
      background: rgba(0,0,0,0.8);
      padding: 20px;
      border-radius: 10px;
    }
    .admin-panel input, .admin-panel button {
      padding: 10px;
      margin: 5px 0;
      width: 80%;
      font-size: 16px;
    }

    /* Form */
    input, select {
      padding: 10px;
      margin: 5px 0;
      width: 90%;
      font-size: 16px;
      border-radius: 5px;
      border: none;
    }
    button {
      padding: 12px 20px;
      font-size: 18px;
      background: #ff4d4d;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      color: #fff;
    }
    button:hover { background: #ff1a1a; }

    /* Footer */
    footer {
      padding: 20px;
      font-size: 14px;
      color: #777;
    }

    /* Mobil */
    @media (max-width: 600px){
      header h1 { font-size: 40px; }
      .box { width: 90%; padding: 15px; }
      input, button { width: 95%; }
    }
  </style>
</head>

<body>
<header>
  <img src="image.png" alt="Logo" style="width:150px; margin-bottom:15px;">
  <h1>TAGBASE</h1>
  <p>IG: cinar0zer</p>
</header>

<section>
  <!-- Hakkımızda -->
  <div class="box">
    <h2>Hakkımızda</h2>
    <p>
      TagBase daha çok sokak stilleri için uygun olan POSCA kalem ve taglar için kalem satış yapılacaktır.
      Elden teslim yapılır, kargo yoktur. Alımlar Bursa/Mustafakemalpaşa’dan yapılır.
    </p>
  </div>

  <!-- Ürünler -->
  <div class="box">
    <h2>Ürünler</h2>
    <p>
      • Sprey Boyalar<br>
      • Posca Kalemler<br>
    </p>
  </div>

  <!-- Sipariş Formu -->
  <div class="box">
    <h2>Sipariş Ver</h2>
    <form onsubmit="return sendOrder()">
      <input name="isim" required placeholder="İsim">
      <input name="adres" required placeholder="Adres">
      <input name="urun" value="Posca Kalem" readonly>
      <input name="renk" required placeholder="Renk">
      <input id="adet" type="number" min="1" value="1" required>
      <button type="submit">Sipariş Ver</button>
    </form>
  </div>

  <!-- Reklam -->
  <div class="box">
    <h2>Reklam</h2>
    <p id="reklamText">Varsayılan reklam buraya gelecek.</p>
  </div>

  <!-- Admin Panel -->
  <div class="box admin-panel">
    <h2>Admin Paneli (Giriş: cinar0zer / han11222)</h2>
    <input type="text" id="adminReklam" placeholder="Yeni reklam">
    <button onclick="updateReklam()">Reklamı Kaydet</button>
  </div>
</section>

<footer>
  © 2026 TagBase bir @cinar0zer aracıdır
</footer>

<!-- Firebase Modül Script -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
  import { getFirestore, doc, getDoc, setDoc, collection, addDoc } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyD1AB5LzF1Z0G5LNCfSGTnin3kJbijMGuM",
    authDomain: "tagbase-43065.firebaseapp.com",
    projectId: "tagbase-43065",
    storageBucket: "tagbase-43065.firebasestorage.app",
    messagingSenderId: "1042937394410",
    appId: "1:1042937394410:web:4f5637cb66b46ed8e61393",
    measurementId: "G-866HDVSVF4"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // Reklam çek
  const reklamText = document.getElementById("reklamText");
  async function loadReklam() {
    const docRef = doc(db, "site", "reklam");
    const docSnap = await getDoc(docRef);
    if (docSnap.exists()) {
      reklamText.innerHTML = docSnap.data().metin;
    } else {
      await setDoc(docRef, { metin: reklamText.innerHTML });
    }
  }
  loadReklam();

  // Admin reklam kaydet
  const adminReklam = document.getElementById("adminReklam");
  async function updateReklam() {
    const yeni = adminReklam.value;
    reklamText.innerHTML = yeni;
    await setDoc(doc(db, "site", "reklam"), { metin: yeni });
    alert("Reklam kaydedildi!");
  }
  window.updateReklam = updateReklam;

  // Sipariş gönder
  async function sendOrder() {
    const adet = parseInt(document.getElementById("adet").value);
    const stokRef = doc(db, "site", "stokFiyat");
    const stokSnap = await getDoc(stokRef);
    let stok = stokSnap.data().stok;
    let fiyat = stokSnap.data().fiyat;

    if (adet > stok) { alert("Yetersiz stok!"); return false; }
    stok -= adet;
    await setDoc(stokRef, { stok: stok, fiyat: fiyat });

    const orderNo = "TB-" + Math.floor(Math.random() * 99999);

    await addDoc(collection(db, "siparisler"), {
      siparis_no: orderNo,
      isim: document.querySelector('[name="isim"]').value,
      adres: document.querySelector('[name="adres"]').value,
      urun: document.querySelector('[name="urun"]').value,
      renk: document.querySelector('[name="renk"]').value,
      adet: adet,
      toplam: adet * fiyat,
      tarih: new Date()
    });

    alert("Sipariş verildi! Numara: " + orderNo);
    return true;
  }
  window.sendOrder = sendOrder;
</script>
</body>
</html>

